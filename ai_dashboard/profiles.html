<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
  <meta charset="UTF-8">
  <title>TremorSense AI — Profile Trends</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Longitudinal tremor biomarker trends and session history.">
  <link rel="stylesheet" href="./dashboard.css">
</head>

<body class="bg-[#060610] text-slate-100 font-sans h-full flex overflow-x-hidden">
  <canvas id="bgCanvas" class="fixed inset-0 w-full h-full pointer-events-none z-0 opacity-40"></canvas>

  <!-- Sidebar (lighter, profile-focused) -->
  <aside class="fixed top-0 left-0 bottom-0 z-50 flex flex-col w-60
         bg-[rgba(6,6,20,0.92)] border-r border-white/[0.06]
         backdrop-blur-2xl px-4 py-5">
    <div class="flex items-center justify-between pb-4 mb-3 border-b border-white/[0.06]">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-xl flex items-center justify-center flex-shrink-0
                    border border-violet-500/30"
          style="background:linear-gradient(135deg,rgba(139,92,246,0.3),rgba(45,212,191,0.2))">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="9" fill="rgba(139,92,246,0.35)" stroke="#8b5cf6" stroke-width="1.5" />
            <path d="M6 13l3-3 3 3 3-3 3 3" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </div>
        <div>
          <div
            class="font-grotesk text-base font-bold bg-gradient-to-r from-violet-400 to-teal-400 bg-clip-text text-transparent">
            Patient Profile
          </div>
          <div class="text-[10px] text-slate-500 font-medium tracking-wider uppercase mt-0.5">
            Longitudinal Trends
          </div>
        </div>
      </div>
      <a href="./index.html"
        class="text-[10px] font-semibold text-slate-400 px-2 py-1 rounded-lg border border-white/[0.08]
               hover:border-violet-400/60 hover:text-violet-300 transition-colors">
        Dashboard
      </a>
    </div>

    <div class="text-[9px] font-bold tracking-widest uppercase text-slate-600 px-1 mb-2">
      Profile
    </div>

    <div class="flex flex-col gap-2 mb-4">
      <div class="flex items-center gap-3 bg-white/[0.03] border border-white/[0.08] rounded-xl px-3 py-2.5">
        <div class="w-7 h-7 rounded-full bg-violet-500/20 flex items-center justify-center text-xs font-bold">
          P1
        </div>
        <div class="flex-1 min-w-0">
          <div class="text-[12px] font-semibold text-slate-100 truncate" id="profileName">
            Default Clinical Profile
          </div>
          <div class="text-[10px] text-slate-500">Local · Fake identifier</div>
        </div>
      </div>
    </div>

    <div class="text-[9px] font-bold tracking-widest uppercase text-slate-600 px-1 mb-2">
      Summary
    </div>
    <div class="flex flex-col gap-2 bg-white/[0.025] border border-white/[0.06] rounded-xl p-3 text-[11px]">
      <div class="flex justify-between items-center">
        <span class="text-slate-500">Sessions</span>
        <span id="profileSessionCount" class="font-mono text-xs text-slate-100">0</span>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-slate-500">Mean score (all)</span>
        <span id="profileMeanScore" class="font-mono text-xs text-emerald-400">—</span>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-slate-500">Trend</span>
        <span id="profileTrendLabel" class="font-mono text-xs text-slate-400">—</span>
      </div>
    </div>

    <div class="flex-1"></div>
    <div class="text-[10px] text-slate-600 mt-4">
      Data is stored locally in a SQLite file (`profiles.db`) on this machine.
    </div>
  </aside>

  <!-- Main content -->
  <main class="ml-60 flex-1 flex flex-col min-h-screen relative z-10">
    <header class="sticky top-0 z-40 flex items-center justify-between px-7 py-4
                   border-b border-white/[0.06] bg-[rgba(6,6,16,0.75)] backdrop-blur-xl">
      <div>
        <h1 class="font-grotesk text-xl font-bold tracking-tight">Longitudinal Tremor Profile</h1>
        <p class="text-xs text-slate-500 mt-0.5">
          Aggregated biomarkers from previous AI-analyzed sessions.
        </p>
      </div>
      <div class="flex items-center gap-3 text-[11px] text-slate-500">
        <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-[0_0_8px_rgba(52,211,153,0.7)]"></span>
        Local-only SQL storage
      </div>
    </header>

    <div class="grid gap-4 px-7 py-5 pb-10 flex-1" style="grid-template-columns: minmax(0, 2fr) minmax(0, 1.4fr)">
      <!-- Left: Trends -->
      <section class="flex flex-col gap-4">
        <div class="panel-card fade-item">
          <div class="panel-header">
            <div class="panel-label">
              <div class="panel-icon teal bg-teal-400/10 border-teal-400/20 text-teal-400">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                  <polyline points="3 17 9 11 13 15 21 7" />
                  <polyline points="21 11 21 7 17 7" />
                </svg>
              </div>
              <span class="panel-label-text">Session Severity Trend</span>
            </div>
            <span id="trendBadgeProfile"
              class="font-mono text-[10px] px-2 py-0.5 rounded bg-white/[0.04] text-slate-500">—</span>
          </div>
          <div class="h-60">
            <canvas id="profileTrendChart" class="w-full h-full"></canvas>
          </div>
        </div>

        <div class="panel-card fade-item">
          <div class="panel-header">
            <div class="panel-label">
              <div class="panel-icon violet bg-violet-400/10 border-violet-400/20 text-violet-400">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                  <circle cx="12" cy="12" r="9" />
                  <path d="M12 3v9l5 3" />
                </svg>
              </div>
              <span class="panel-label-text">Dominant Band Over Time</span>
            </div>
          </div>
          <div class="h-52">
            <canvas id="profileBandChart" class="w-full h-full"></canvas>
          </div>
        </div>
      </section>

      <!-- Right: Session list -->
      <section class="flex flex-col gap-4">
        <div class="panel-card fade-item flex-1">
          <div class="panel-header">
            <div class="panel-label">
              <div class="panel-icon muted">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                  <path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2" />
                  <path d="M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2" />
                </svg>
              </div>
              <span class="panel-label-text">Previous Sessions</span>
            </div>
          </div>

          <div id="sessionListEmpty" class="text-[12px] text-slate-500 py-4">
            Run a few sessions on the main dashboard and generate AI reports — they will appear here automatically.
          </div>

          <div class="max-h-[420px] overflow-y-auto" id="sessionList" style="display:none">
            <table class="w-full text-[11px]">
              <thead class="text-slate-500 border-b border-white/[0.06]">
                <tr>
                  <th class="text-left font-semibold py-2 pr-3">Date</th>
                  <th class="text-left font-semibold py-2 pr-3">Session ID</th>
                  <th class="text-left font-semibold py-2 pr-3">Mean Score</th>
                  <th class="text-left font-semibold py-2 pr-3">Dom. Band</th>
                  <th class="text-left font-semibold py-2">Confidence</th>
                </tr>
              </thead>
              <tbody id="sessionListBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script type="module" src="./profiles.js"></script>
</body>

</html>

